import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";import{o as s,c as a,e}from"./app.9dba3054.js";const t={},i=e(`<h2 id="\u5207\u6362\u81F3-ui-\u7EBF\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u5207\u6362\u81F3-ui-\u7EBF\u7A0B" aria-hidden="true">#</a> \u5207\u6362\u81F3 UI \u7EBF\u7A0B</h2><p>\u4ECE\u4F60\u76EE\u524D\u770B\u5230\u7684\u60C5\u51B5\u6765\u770B\uFF0C\u534F\u7A0B\u90FD\u662F\u6BD4\u8F83\u7B80\u5355\u7684\uFF0C\u5B83\u4EEC\u7684\u5927\u90E8\u5206\u529F\u80FD\u90FD\u5185\u7F6E\u5728\u8BED\u8A00\u672C\u8EAB\u4E2D\u3002\u5207\u6362\u81F3 UI \u7EBF\u7A0B\u4E5F\u5E76\u4E0D\u590D\u6742\uFF0C\u53EF\u4EE5\u4EE5 UI dispatcher \u4F5C\u4E3A\u5176\u7EBF\u7A0B\u4E0A\u4E0B\u6587\u6765\u542F\u52A8\u4E00\u4E2A\u65B0\u7684\u534F\u7A0B\u3002</p><p>\u7531\u4E8E\u6211\u4EEC\u8BA8\u8BBA\u7684\u662F\u5177\u6709\u53EF\u89C1\u7528\u6237\u754C\u9762\u7684\u5E94\u7528\u7A0B\u5E8F\uFF0C\u56E0\u6B64\u60A8\u53EF\u4EE5\u53D1\u5E03\u5230 Android\u3001Swing \u548C JavaFx \u5E94\u7528\u7A0B\u5E8F\u7684\u4E3B\u7EBF\u7A0B\u3002\u60A8\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u4F7F\u7528 Dispatchers.Main \u4F5C\u4E3A\u4E0A\u4E0B\u6587\uFF1A</p><div class="language-kotlin ext-kt line-numbers-mode"><pre class="language-kotlin"><code>GlobalScope<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span>Dispatchers<span class="token punctuation">.</span>Main<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF0C\u4E0A\u9762\u7684\u4EE3\u7801\u8FD8\u4E0D\u80FD\u8FD0\u884C\u3002\u60A8\u9700\u8981\u8BBE\u7F6E\u4EE5\u4E0B\u4F9D\u8D56\u9879\u4E4B\u4E00\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>implementation <span class="token interpolation-string"><span class="token string">&quot;org.jetbrains.kotlinx:kotlinx-coroutinesandroid:...&quot;</span></span>
implementation <span class="token interpolation-string"><span class="token string">&quot;org.jetbrains.kotlinx:kotlinx-coroutinesswing:...&quot;</span></span>
implementation <span class="token interpolation-string"><span class="token string">&quot;org.jetbrains.kotlinx:kotlinx-coroutinesjavafx:...&quot;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5426\u5219\uFF0C\u7A0B\u5E8F\u5C06\u4F1A\u629B\u51FA\u4EE5\u4E0B\u5F02\u5E38\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Exception in thread &quot;DefaultDispatcher-worker-3&quot; java.lang.IllegalStateException: Module with the Main dispatcher is missing. Add dependency providing the Main dispatcher, e.g. \u2019kotlinx-coroutines-android\u2019
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u60A8\u53EF\u4EE5\u901A\u8FC7\u4E00\u4E2A\u7B80\u5355\u7684 Swing \u793A\u4F8B\u6765\u5C1D\u8BD5\u4E0A\u8FF0\u4EE3\u7801\u3002\u9996\u5148\uFF0C\u60A8\u9700\u8981\u5C06\u6B64\u4F9D\u8D56\u9879\u6DFB\u52A0\u5230 build.gradle\uFF1A</p><div class="language-groovy ext-groovy line-numbers-mode"><pre class="language-groovy"><code>implementation <span class="token interpolation-string"><span class="token string">&quot;org.jetbrains.kotlinx:kotlinx-coroutines-swing:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">kotlin_coroutines_version</span></span><span class="token string">&quot;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u901A\u8FC7\u70B9\u51FB Gradle \u9009\u9879\u5361\u53F3\u4E0A\u65B9\u7684 Sync \u6309\u94AE\u6765\u540C\u6B65\u5E76\u91CD\u65B0\u52A0\u8F7D Gradle \u9879\u76EE\u3002\u7136\u540E\uFF0C\u60A8\u53EF\u4EE5\u5C06 <code>main</code> \u51FD\u6570\u66FF\u6362\u4E3A\uFF1A</p><div class="language-kotlin ext-kt line-numbers-mode"><pre class="language-kotlin"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    GlobalScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> bgThreadName <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name
        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;I\u2019m Job 1 in thread </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">bgThreadName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        GlobalScope<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span>Dispatchers<span class="token punctuation">.</span>Main<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">val</span> uiThreadName <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;I\u2019m Job 2 in thread </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">uiThreadName</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u540C\u65F6\u5E76\u5BFC\u5165 Dispatchers \u3002\u5916\u90E8\u534F\u7A0B\u6253\u5370\u6267\u884C\u5B83\u7684\u7EBF\u7A0B\u7684\u540D\u79F0\u3002\u7ECF\u8FC7\u77ED\u6682\u7684\u5EF6\u8FDF\u540E\uFF0C\u60A8\u4F7F\u7528 Dispatchers.Main \u4F5C\u4E3A CoroutineContext \u542F\u52A8\u53E6\u4E00\u4E2A\u534F\u7A0B\u3002\u8FD9\u662F\u60A8\u4E0E\u4E3B\u7EBF\u7A0B\u4EA4\u4E92\u65B9\u5F0F\u7684\u5176\u4E2D\u4E00\u79CD\u3002</p><p>\u8FD0\u884C\u4E0A\u8FF0\u4EE3\u7801\uFF0C\u53EF\u80FD\u5F97\u5230\u4EE5\u4E0B\u8F93\u51FA\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>I\u2019m Job 1 in thread DefaultDispatcher-worker-1
I\u2019m Job 2 in thread AWT-EventQueue-0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B2C\u4E00\u4E2A Job \u7531\u5DE5\u4F5C\u7EBF\u7A0B\u5728\u540E\u53F0\u6267\u884C\u3002\u7B2C\u4E8C\u4E2A\u7531 Swing \u4E2D\u7684\u4E3B\u7EBF\u7A0B\u6267\u884C\u3002\u5F88\u7B80\u5355\u5427\uFF1F</p><p>\u8981\u67E5\u770B\u672C\u7AE0\u4E2D\u7684\u793A\u4F8B\uFF0C\u8BF7\u4F7F\u7528 IntelliJ \u6253\u5F00\u672C\u7AE0\u7684\u6700\u7EC8\u9879\u76EE\u5E76\u5BFC\u822A\u5230 getting-started-with-coroutines/projects/final \u6587\u4EF6\u5939\uFF0C\u9009\u62E9getting_started_with_coroutines \u9879\u76EE\u3002</p>`,17),o=[i];function p(l,c){return s(),a("div",null,o)}var d=n(t,[["render",p],["__file","06.posting-to-the-ui-thread.html.vue"]]);export{d as default};
